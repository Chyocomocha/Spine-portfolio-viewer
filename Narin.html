<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spine Alpha Fix</title>
<script src="https://unpkg.com/@esotericsoftware/spine-player@4.2.43/dist/iife/spine-player.js"></script>
<link rel="stylesheet" href="https://unpkg.com/@esotericsoftware/spine-player@4.2.43/dist/spine-player.css">
<style>
    body { background: #555; margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; color: white; font-family: monospace; }
    #player-container { width: 100%; height: 80%; border: 1px solid #777; }
    #log { width: 90%; background: #000; padding: 10px; height: 100px; overflow-y: scroll; border-bottom: 2px solid red; }
</style>
</head>
<body>

<div id="log">상태 로그 대기 중...</div>
<div id="player-container"></div>

<script>
    function log(msg) {
        var logBox = document.getElementById("log");
        logBox.innerHTML += "<br>> " + msg;
        logBox.scrollTop = logBox.scrollHeight;
    }

    new spine.SpinePlayer("player-container", {
        skelUrl: "./LD_Narin.skel.bytes", 
        atlasUrl: "./LD_Narin.atlas.txt",
        
        // ★ 핵심 변경: 아까 false로 안 됐으니 true(기본값)로 변경합니다.
        // 스파인 Export 설정과 이 값이 다르면 투명하게 나옵니다.
        premultipliedAlpha: true, 
        
        showControls: true,
        backgroundColor: "#555555", // 회색 배경
        alpha: true,

        success: function (player) {
            log("1. 파일 로딩 성공 (Network 200)");
            
            var data = player.skeleton.data;
            log("2. 데이터 파싱 성공: 애니메이션 " + data.animations.length + "개 발견됨");
            
            // 애니메이션 목록을 화면에 출력 (데이터가 진짜 있는지 확인)
            var animNames = "";
            for(var i=0; i<data.animations.length; i++) {
                animNames += data.animations[i].name + " ";
            }
            log("3. 발견된 애니메이션: " + animNames);

            // 첫 번째 애니메이션 강제 재생
            if (data.animations.length > 0) {
                player.animationState.setAnimation(0, data.animations[0].name, true);
                log("4. 재생 시도 중: " + data.animations[0].name);
            }
        },
        error: function (p, e) {
            log("에러 발생: " + e);
        }
    });
</script>

</body>
</html>