<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>New Spine Project</title>
<script src="https://unpkg.com/@esotericsoftware/spine-player@4.2/dist/iife/spine-player.js"></script>
<link rel="stylesheet" href="https://unpkg.com/@esotericsoftware/spine-player@4.2/dist/spine-player.css">
<style>
    body { background: #222; margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; color: white; font-family: sans-serif; }
    
    /* 플레이어 영역 */
    #player-container { width: 100%; height: 70vh; margin-bottom: 20px; border: 1px solid #444; }

    /* 버튼 그룹 */
    .btn-group { display: flex; gap: 10px; }
    
    button {
        padding: 10px 20px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        border: none;
        border-radius: 5px;
        color: white;
        transition: 0.2s;
    }

    button:hover { transform: scale(1.05); filter: brightness(1.2); }
    button:active { transform: scale(0.95); }

    /* 각 버튼 색상 */
    .btn-idle { background: #4CAF50; } /* 초록 */
    .btn-move { background: #2196F3; } /* 파랑 */
    .btn-death { background: #f44336; } /* 빨강 */
</style>
</head>
<body>

<div id="player-container"></div>

<div class="btn-group">
    <button class="btn-idle" onclick="playAnim('idle')">Idle</button>
    <button class="btn-move" onclick="playAnim('move')">Move</button>
    <button class="btn-death" onclick="playAnim('death')">Death</button>
</div>

<script>
    let player;

    // ▼▼▼ 여기에 새 파일 이름을 적어주세요 ▼▼▼
    const CONFIG = {
        skelUrl: "./SD_Narin.skel.bytes", 
        atlasUrl: "./SD_Narin.atlas.txt"
    };

    new spine.SpinePlayer("player-container", {
        skelUrl: CONFIG.skelUrl,
        atlasUrl: CONFIG.atlasUrl,
        
        showControls: true,       // 타임라인 바 표시
        backgroundColor: "#222222", // 배경색 (확인용 회색)
        premultipliedAlpha: true,   // 기본 설정

        success: function (p) {
            player = p;
            console.log("로딩 완료!");
            
            // 로딩되면 자동으로 'idle' 먼저 재생 (파일에 idle이 있다면)
            try {
                player.animationState.setAnimation(0, "idle", true);
            } catch(e) {
                console.log("자동 재생 실패: idle 애니메이션이 파일에 없는 것 같습니다.");
            }
        },
        error: function (p, e) {
            console.error("에러 발생:", e);
        }
    });

    // --- 기능 구현 ---
    function playAnim(name) {
        if (!player) return;

        // 'death'는 보통 한 번만 재생하므로 false, 나머지는 반복(true)
        // 만약 death도 반복시키고 싶다면 이 조건을 지우고 true로 통일하세요.
        let isLoop = (name !== 'death');

        try {
            player.animationState.setAnimation(0, name, isLoop);
            console.log("재생 중:", name, "/ 반복:", isLoop);
        } catch (e) {
            alert("파일 안에 '" + name + "'라는 이름의 애니메이션이 없습니다!");
        }
    }
</script>

</body>
</html>